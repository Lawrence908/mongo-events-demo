{% extends "base.html" %}

{% block title %}EventSphere - Discover Events Near You{% endblock %}

{% block content %}
<div x-data="landingPage()">
    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container">
            <div class="row align-items-center min-vh-75">
                <div class="col-lg-6">
                    <div class="hero-content">
                        <h1 class="display-4 fw-bold mb-4">
                            Discover Events 
                            <span class="text-accent">Near You</span>
                        </h1>
                        <p class="lead mb-4">
                            EventSphere uses MongoDB's powerful geospatial capabilities and Leaflet.js 
                            to help you find amazing events happening around you. Built with Flask and 
                            modern web technologies.
                        </p>
                        <div class="hero-features mb-4">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <i class="bi bi-geo-alt-fill text-accent me-2"></i>
                                        <span>Geospatial Search</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <i class="bi bi-database text-accent me-2"></i>
                                        <span>MongoDB Atlas</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <i class="bi bi-map text-accent me-2"></i>
                                        <span>Interactive Maps</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="feature-item">
                                        <i class="bi bi-lightning-charge text-accent me-2"></i>
                                        <span>Real-time Updates</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="hero-actions">
                            <a href="{{ url_for('map_page') }}" class="btn btn-accent btn-lg me-3">
                                <i class="bi bi-map me-2"></i>
                                Explore Map
                            </a>
                            <a href="{{ url_for('events_list') }}" class="btn btn-outline-accent btn-lg">
                                <i class="bi bi-list-ul me-2"></i>
                                Browse Events
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <!-- Phone Mockup with Interactive Map -->
                    <div class="phone-mockup">
                        <div class="phone-frame">
                            <div class="phone-screen">
                                <div class="phone-header">
                                    <div class="phone-status-bar">
                                        <span class="time">9:41</span>
                                        <div class="status-icons">
                                            <i class="bi bi-signal-4"></i>
                                            <i class="bi bi-wifi"></i>
                                            <i class="bi bi-battery-full"></i>
                                        </div>
                                    </div>
                                    <div class="phone-nav">
                                        <h6 class="mb-0">EventSphere</h6>
                                        <i class="bi bi-geo-alt-fill text-accent"></i>
                                    </div>
                                </div>
                                <div id="demoMap" class="phone-map"></div>
                                <div class="phone-controls">
                                    <div class="demo-search-bar">
                                        <i class="bi bi-search"></i>
                                        <span>Search events near you...</span>
                                    </div>
                                    <div class="demo-categories">
                                        <span class="demo-category active">All</span>
                                        <span class="demo-category">Music</span>
                                        <span class="demo-category">Tech</span>
                                        <span class="demo-category">Food</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Technology Stack Section -->
    <div class="tech-stack-section py-5">
        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-12">
                    <h2 class="h3 mb-3">Built With Modern Technologies</h2>
                    <p class="text-muted">A full-stack web application showcasing geospatial data processing</p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-md-3 col-sm-6">
                    <div class="tech-card">
                        <div class="tech-icon">
                            <i class="bi bi-database"></i>
                        </div>
                        <h6>MongoDB</h6>
                        <p class="small text-muted">Geospatial queries & indexing</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="tech-card">
                        <div class="tech-icon">
                            <i class="bi bi-gear"></i>
                        </div>
                        <h6>Flask</h6>
                        <p class="small text-muted">Python web framework</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="tech-card">
                        <div class="tech-icon">
                            <i class="bi bi-map"></i>
                        </div>
                        <h6>Leaflet.js</h6>
                        <p class="small text-muted">Interactive mapping</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="tech-card">
                        <div class="tech-icon">
                            <i class="bi bi-lightning-charge"></i>
                        </div>
                        <h6>Socket.IO</h6>
                        <p class="small text-muted">Real-time features</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="features-section py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="bi bi-geo-alt-fill"></i>
                        </div>
                        <h5>Geospatial Search</h5>
                        <p>Find events within a specific radius using MongoDB's powerful 2dsphere indexes and $geoNear queries.</p>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="bi bi-funnel"></i>
                        </div>
                        <h5>Smart Filtering</h5>
                        <p>Filter events by category, date range, and distance with real-time updates and pagination.</p>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="bi bi-graph-up"></i>
                        </div>
                        <h5>Analytics Dashboard</h5>
                        <p>Track event attendance, venue popularity, and user engagement patterns.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CTA Section -->
    <div class="cta-section py-5">
        <div class="container text-center">
            <h2 class="mb-4">Ready to Explore?</h2>
            <p class="lead mb-4">Start discovering amazing events happening around you</p>
            <a href="{{ url_for('map_page') }}" class="btn btn-accent btn-lg">
                <i class="bi bi-rocket-takeoff me-2"></i>
                Launch EventSphere
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function landingPage() {
    return {
        map: null,
        demoMarkers: [],
        
        init() {
            this.initDemoMap();
            this.addDemoMarkers();
        },
        
        initDemoMap() {
            // Initialize the demo map inside the phone mockup
            this.map = L.map('demoMap', {
                zoomControl: false,
                attributionControl: false,
                dragging: true,
                touchZoom: true,
                doubleClickZoom: true,
                scrollWheelZoom: false,
                boxZoom: false,
                keyboard: false
            }).setView([40.7128, -74.0060], 13);
            
            // Add tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(this.map);
            
            // Add a subtle search radius circle
            L.circle([40.7128, -74.0060], {
                radius: 2000,
                fillColor: '#00ED64',
                fillOpacity: 0.1,
                color: '#00ED64',
                weight: 2,
                opacity: 0.6
            }).addTo(this.map);
        },
        
        addDemoMarkers() {
            // Add some demo event markers
            const demoEvents = [
                { lat: 40.7589, lng: -73.9851, category: 'Music', icon: '🎵' },
                { lat: 40.7505, lng: -73.9934, category: 'Technology', icon: '💻' },
                { lat: 40.7614, lng: -73.9776, category: 'Food & Drink', icon: '🍕' },
                { lat: 40.7489, lng: -73.9857, category: 'Arts & Culture', icon: '🎨' },
                { lat: 40.7505, lng: -73.9934, category: 'Sports', icon: '⚽' }
            ];
            
            demoEvents.forEach(event => {
                const marker = L.marker([event.lat, event.lng], {
                    icon: L.divIcon({
                        className: 'demo-marker',
                        html: `<div style="
                            background-color: ${this.getCategoryColor(event.category)};
                            color: white;
                            border: 2px solid white;
                            border-radius: 50%;
                            width: 24px;
                            height: 24px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 12px;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                        ">${event.icon}</div>`,
                        iconSize: [24, 24],
                        iconAnchor: [12, 12]
                    })
                }).addTo(this.map);
                
                marker.bindPopup(`
                    <div class="demo-popup">
                        <h6>Demo Event</h6>
                        <p class="small mb-1">${event.category} Event</p>
                        <small class="text-muted">Click "Explore Map" to see real events!</small>
                    </div>
                `);
                
                this.demoMarkers.push(marker);
            });
        },
        
        getCategoryColor(category) {
            const colors = {
                'Music': '#e83e8c',
                'Technology': '#007bff',
                'Food & Drink': '#fd7e14',
                'Arts & Culture': '#6f42c1',
                'Sports': '#28a745'
            };
            return colors[category] || '#6c757d';
        }
    }
}
</script>
{% endblock %}